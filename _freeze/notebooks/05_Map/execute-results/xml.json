{
  "hash": "37cba35f09cb76c8596877361cd882f4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Map of study area\nauthor: Alex Koiter\n---\n\n\n\n\n\n\n\n\n\n## Load Libraries\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(ggspatial)\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nLinking to GEOS 3.10.2, GDAL 3.4.3, PROJ 8.2.1; sf_use_s2() is TRUE\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(rnaturalearth)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nThe legacy packages maptools, rgdal, and rgeos, underpinning the sp package,\nwhich was just loaded, will retire in October 2023.\nPlease refer to R-spatial evolution reports for details, especially\nhttps://r-spatial.org/r/2023/05/15/evolution4.html.\nIt may be desirable to make the sf package available;\npackage maintainers should consider adding sf to Suggests:.\nThe sp package is now running under evolution status 2\n     (status 2 uses the sf package in place of rgdal)\nSupport for Spatial objects (`sp`) will be deprecated in {rnaturalearth} and will be removed in a future release of the package. Please use `sf` objects with {rnaturalearth}. For example: `ne_download(returnclass = 'sf')`\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nlibrary(patchwork)\n```\n:::\n\n\n\n\n\n\n\n\n\n\n## Important coordinants \nRegional site location\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nsite <- st_sfc(st_point(c(-99.924176, 50.056015)), crs = 4326)\nbox = c(xmin = -99.99, xmax = -99.924176 + 0.12, ymax = 50.056015 +.065, ymin = 50.056015 - 0.065)\n```\n:::\n\n\n\n\n\n\n\n\n\n\nStudy plot locations\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\n# sites <- st_as_sf(data.frame(site = c(1,2,3,4), lat = c(50.052525, 50.052209, 50.059208, 50.060235), long = c(-99.924242, -99.918429, -99.912849, -99.931591)), coords = c(\"long\", \"lat\"), crs = 4362)\n                                                                                              \nsites <- data.frame(site = c(1,2,3,4), lat = c(50.052525, 50.052209, 50.059208, 50.060235), long = c(-99.924242, -99.918429, -99.912849, -99.931591))\n```\n:::\n\n\n\n\n\n\n\n\n\n\n## Land use data of region\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nsf_use_s2(FALSE)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nSpherical geometry (s2) switched off\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nland <- st_read(here::here(\"notebooks/Data/lcv_brandon_2006_shp/lcv_brandon_2006.shp\")) %>%\n  bind_rows(st_read(here::here(\"notebooks/Data/lcv_minnedosa_2004_2006_shp/lcv_minnedosa_2004_2006.shp\"))) %>%\n  st_transform(crs = 4326) %>%\n  st_crop(st_bbox(box, crs = 4326)) %>%\n  mutate(Land_use = recode(CLASSNAME, \"Agricultural Field\" = \"Agriculture\", \"Agri - Forage Field\" = \"Forage\", \"Water Body\" = \"Water\", \"Wetland - Treed Bog\" = \"Wetland\", \"Wetland - Marsh\" = \"Wetland\", \"Decidious Forest\" = \"Forest\", \"Open Decidious Forest\" = \"Forest\", \"Mixedwood Forest\" = \"Forest\", \"Forest Cut Blocks\" = \"Forest\", \"Coniferous Forest\" = \"Forest\",\"Roads Trails Rail Lines\" = \"Other\", \"Sand and Gravel\" = \"Other\", \"Cultural Features\" = \"Other\", \"Range and Grassland\" = \"Forage\", \"Water Bodies\" = \"Water\")) %>%\n  # group_by(Land_use) %>%\n  # summarise(do_union = TRUE) %>%\n  mutate(Land_use = factor(Land_use, levels=c(\"Agriculture\", \"Forage\", \"Forest\",  \"Water\", \"Wetland\", \"Other\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `lcv_brandon_2006' from data source \n  `/home/alex/Dropbox/MBFI/MBFI riparian study/riparian-grazing-manuscript/notebooks/Data/lcv_brandon_2006_shp/lcv_brandon_2006.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 145146 features and 5 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 429971 ymin: 5427260 xmax: 510011 ymax: 5542070\nProjected CRS: UTM\nReading layer `lcv_minnedosa_2004_2006' from data source \n  `/home/alex/Dropbox/MBFI/MBFI riparian study/riparian-grazing-manuscript/notebooks/Data/lcv_minnedosa_2004_2006_shp/lcv_minnedosa_2004_2006.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 160653 features and 5 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 429972 ymin: 5542070 xmax: 549972 ymax: 5656880\nProjected CRS: UTM\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nalthough coordinates are longitude/latitude, st_intersection assumes that they\nare planar\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: attribute variables are assumed to be spatially constant throughout\nall geometries\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n## Canada\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\ncanada <- ne_states(country = \"Canada\", returnclass = \"sf\") %>%\n  st_transform(crs = 3348)\n```\n:::\n\n\n\n\n\n\n\n\n\n\n## Maps\n### Land use\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\np3 <- ggplot() +\n  theme_bw() +\n  geom_sf(data = land, aes(fill = Land_use), lwd = 0) +\n  scale_fill_manual(values=c(\"#458B00\",  \"#CDAD00\", \"#006400\",\"#009ACD\", \"#0096D194\",  \"#C1CDCD\"), name = \"Land use\") +\n  geom_point(data = sites, aes(x = long, y = lat), shape = 23, colour = \"red\", fill = \"red\", size = 2) +\n  coord_sf(ylim = c(49.992, 50.1), xlim = c(-99.965, -99.80418), crs = 4326) +\n  scale_y_continuous(expand = c(0,0)) +\n  scale_x_continuous(expand = c(0,0)) +\n  labs(tag = \"b)\") +\n  annotation_scale(location = \"bl\",\n                   height = unit(0.05, \"cm\")) +\n  annotation_north_arrow(location = \"br\", \n                         height = unit(0.5, \"cm\"),\n                         width = unit(0.5, \"cm\")) +\n  theme(axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        axis.title = element_blank(),\n        plot.margin = unit(c(0,0,0,0), \"mm\"))\n```\n:::\n\n\n\n\n\n\n\n\n\n\n### Open street\nnot used\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\np2 <- ggplot(site) +\n  annotation_map_tile(type = \"osm\", zoom = 15) +\n  geom_point(data = sites, aes(x = long, y = lat), shape = 23, colour = \"red\", fill = \"red\", size = 1) +\n  #coord_sf(ylim = c(50.056015 +.02, 50.056015 - 0.02), xlim = c(-99.924176 - 0.04, -99.924176 + 0.04), crs = 4326) +\n  coord_sf(ylim = c(50.056015 +.01, 50.056015 +.065), xlim = c(-99.924176 - 0.02, -99.924176 + 0.02), crs = 4326) +\n  annotation_scale(location = \"bl\",\n                   height = unit(0.05, \"cm\")) +\n  annotation_north_arrow(location = \"br\", \n                         height = unit(0.5, \"cm\"),\n                         width = unit(0.5, \"cm\")) +\n  theme(axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        axis.title = element_blank(),\n        plot.margin = unit(c(0,0,0,0), \"mm\"))\np2\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nLoading required namespace: raster\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nPlease note that rgdal will be retired during October 2023,\nplan transition to sf/stars/terra functions using GDAL and PROJ\nat your earliest convenience.\nSee https://r-spatial.org/r/2023/05/15/evolution4.html and https://github.com/r-spatial/evolution\nrgdal: version: 1.6-7, (SVN revision 1203)\nGeospatial Data Abstraction Library extensions to R successfully loaded\nLoaded GDAL runtime: GDAL 3.4.3, released 2022/04/22\nPath to GDAL shared files: /usr/share/gdal\nGDAL binary built with GEOS: TRUE \nLoaded PROJ runtime: Rel. 8.2.1, January 1st, 2022, [PJ_VERSION: 821]\nPath to PROJ shared files: /home/alex/.local/share/proj:/usr/share/proj\nPROJ CDN enabled: TRUE\nLinking to sp version:2.0-0\nTo mute warnings of possible GDAL/OSR exportToProj4() degradation,\nuse options(\"rgdal_show_exportToProj4_warnings\"=\"none\") before loading sp or rgdal.\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nZoom: 15\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](05_Map_files/figure-jats/unnamed-chunk-7-1.png)\n:::\n:::\n\n\n\n\n\n\n\n\n\n### Canada\n\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\np1 <- ggplot() +\n  theme_bw() +\n  layer_spatial(canada, fill = \"white\") +\n  layer_spatial(site, shape = 23, colour = \"red\", fill = \"red\", size = 2) +\n  labs(tag = \"a)\") +\n  annotation_scale(location = \"bl\",\n                   height = unit(0.05, \"cm\")) +\n  annotation_north_arrow(location = \"br\", \n                         height = unit(0.5, \"cm\"),\n                         width = unit(0.5, \"cm\")) +\n  theme(axis.text = element_blank(),\n        axis.ticks = element_blank(),\n        axis.title = element_blank(),\n        plot.margin = unit(c(0,0,0,0), \"mm\"),\n        panel.grid.major = element_blank(),\n        panel.grid.minor = element_blank(),\n        panel.border = element_blank(),\n        panel.background = element_blank())\n```\n:::\n\n::: {#cell-fig-map .cell}\n\n```{.r .cell-code .hidden}\n#| label: fig-map\n#| fig-cap: \"Showing a) the study site in southwestern Manitoba and b) the four riparian areas included in this study and the regional land use.\"\n#| fig-alt: \"Map of Canada with red dot showing location of stite. Regional landuse with red dots showing the location of the four riparian areas included in this study\"\n#|\np4 <- p1 + p3 + plot_layout(guides = \"collect\") & theme(legend.position = \"right\")\np4\n#ggsave(filename = \"Figures/Maps.png\", plot = p4, height = 75, width = 180, units = \"mm\", dpi = 600)\n```\n\n::: {.cell-output-display}\n![Showing a) the study site in southwestern Manitoba and b) the four riparian areas included in this study and the regional land use.](05_Map_files/figure-jats/fig-map-1.png){#fig-map fig-alt='Map of Canada with red dot showing location of stite. Regional landuse with red dots showing the location of the four riparian areas included in this study'}\n:::\n:::\n",
    "supporting": [
      "05_Map_files/figure-jats"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}